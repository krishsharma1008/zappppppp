// LAYOUT

@mixin grid {
  display: grid;
  grid-template-columns: repeat(var(--grid-columns, 24), minmax(0, 1fr));
  grid-gap: var(--gutter-size);
}

@mixin column-text {
  padding: 3rem 0;
  font-size: 1.5rem;

  @media screen and (max-aspect-ratio: 10 / 8) {
    font-size: 1.25rem;
  }

  p:last-of-type {
    margin-bottom: 0;
  }
}

@mixin left-column-text {
  @include column-text;
  grid-column: 3 / 11;

  @media screen and (max-aspect-ratio: 12 / 8) {
    grid-column: 2 / 8;
  }

  @media screen and (max-aspect-ratio: 10 / 8) {
    grid-column: 2 / 12;
  }
}

@mixin right-column-text {
  @include column-text;
  grid-column: 15 / 23;

  @media screen and (max-aspect-ratio: 12 / 8) {
    grid-column: 6 / 12;
  }

  @media screen and (max-aspect-ratio: 10 / 8) {
    grid-column: 2 / 12;
  }
}

// TYPO

@mixin title {
  font-family: var(--display-font);
  line-height: 0.85;
  font-weight: normal;
  text-transform: uppercase;
  text-align: center;
  margin: 0;
  transform: skew(-5deg, -5deg);
  -webkit-text-stroke: 0.025em var(--background-color);
}

@mixin main-title {
  @include title;
  font-size: 5.75rem;

  @media screen and (max-aspect-ratio: 14 / 8) {
    font-size: 5rem;
  }

  @media screen and (max-aspect-ratio: 12 / 8) {
    font-size: 4rem;
  }

  @media screen and (max-aspect-ratio: 10 / 8) {
    font-size: 3.25rem;
  }

  @media screen and (orientation: portrait) {
    font-size: 2.75rem;
  }
}

@mixin section-title {
  @include title;
  font-size: 4.5rem;

  @media screen and (orientation: portrait) {
    font-size: 2.375rem;
  }
}

@mixin interaction-title {
  @include title;
  font-size: 3rem;
  position: absolute;
  top: 50%;
  left: 50%;
  width: calc(100% - var(--gutter-size) * 2);
  // transform: translate3d(-50%, -50%, 0) skew(-5deg, -5deg);
  transform: translate3d(-50%, -50%, 0) skew(-20deg, 0deg);
  z-index: 1;
  pointer-events: none;
  -webkit-text-stroke: 0;

  @media (prefers-reduced-motion) {
    display: none;
  }

  @media screen and (max-aspect-ratio: 10 / 8) {
    font-size: 2.5rem;
  }

  @media screen and (orientation: portrait) {
    font-size: 2rem;
  }
}

// COLORS

@mixin retro-colored-letters {
  color: transparent;
  -webkit-text-stroke: 0.02em var(--color-palette-4);
  background: linear-gradient(
    180deg,
    var(--color-palette-1) 0%,
    var(--color-palette-1) 25%,
    var(--foreground-color) 45%,
    var(--foreground-color) 50%,
    var(--background-color) 50%,
    var(--background-color) 55%,
    var(--color-palette-3) 75%,
    var(--color-palette-3) 100%
  );

  background-clip: text;

  body:global(.is-light) & {
    -webkit-text-stroke: 0.02em var(--color-palette-0);
    background: linear-gradient(
      180deg,
      var(--color-palette-4) 0%,
      var(--color-palette-4) 25%,
      var(--foreground-color) 45%,
      var(--foreground-color) 50%,
      var(--background-color) 50%,
      var(--background-color) 55%,
      var(--color-palette-1) 75%,
      var(--color-palette-1) 100%
    );

    background-clip: text;
  }
}

@mixin gradient-colored-letters {
  color: transparent;
  -webkit-text-stroke: 0.02em var(--background-color);
  background: linear-gradient(
    180deg,
    var(--foreground-color) 0%,
    var(--foreground-color) 33.3%,
    var(--color-palette-4) 66.6%,
    var(--color-palette-3) 83.3%,
    var(--color-palette-3) 100%
  );

  background-clip: text;

  body:global(.is-light) & {
    background: linear-gradient(
      180deg,
      var(--foreground-color) 0%,
      var(--foreground-color) 33.3%,
      var(--color-palette-0) 66.6%,
      var(--color-palette-1) 83.3%,
      var(--color-palette-1) 100%
    );

    background-clip: text;
  }
}

@mixin banded-gradient-colored-letters {
  color: transparent;
  -webkit-text-stroke: 0;
  filter: drop-shadow(0.03em 0.03em var(--background-color));

  background: linear-gradient(
    180deg,
    var(--foreground-color) 0%,
    var(--foreground-color) 60%,
    rgba(0, 0, 0, 0) 60%,
    rgba(0, 0, 0, 0) calc(60% + 0.02em),
    var(--color-palette-4) calc(60% + 0.02em),
    var(--color-palette-4) 75%,
    rgba(0, 0, 0, 0) 75%,
    rgba(0, 0, 0, 0) calc(75% + 0.0275em),
    var(--color-palette-3) calc(75% + 0.0275em),
    var(--color-palette-3) 85%,
    rgba(0, 0, 0, 0) 85%,
    rgba(0, 0, 0, 0) calc(85% + 0.035em),
    var(--color-palette-2) calc(85% + 0.035em),
    var(--color-palette-2) 100%
  );

  background-clip: text;

  body:global(.is-light) & {
    background: linear-gradient(
      180deg,
      var(--foreground-color) 0%,
      var(--foreground-color) 60%,
      rgba(0, 0, 0, 0) 60%,
      rgba(0, 0, 0, 0) calc(60% + 0.02em),
      var(--color-palette-0) calc(60% + 0.02em),
      var(--color-palette-0) 75%,
      rgba(0, 0, 0, 0) 75%,
      rgba(0, 0, 0, 0) calc(75% + 0.0275em),
      var(--color-palette-1) calc(75% + 0.0275em),
      var(--color-palette-1) 86.25%,
      rgba(0, 0, 0, 0) 86.25%,
      rgba(0, 0, 0, 0) calc(86.25% + 0.035em),
      var(--color-palette-2) calc(86.25% + 0.035em),
      var(--color-palette-2) 100%
    );

    background-clip: text;
  }
}

// SEPARATORS

@mixin separator {
  position: absolute;
  z-index: -1;
  right: 0;
  left: 0;
  height: var(--height-space);
}

@mixin top-separator {
  @include separator;
  top: calc(var(--height-space) * -1);
}

@mixin bottom-separator {
  @include separator;
  bottom: calc(var(--height-space) * -1);
}

// XP TIER GRADIENTS

// Tier gradient background mixin
// Usage: @include tier-gradient(bronze);
@mixin tier-gradient($tier-name) {
  @if map-has-key($tier-colors, $tier-name) {
    $tier-color: map-get($tier-colors, $tier-name);
    background: linear-gradient(
      135deg,
      $tier-color 0%,
      color-mix(in srgb, $tier-color 70%, black) 100%
    );
  } @else {
    @warn "Unknown tier: #{$tier-name}. Available tiers: #{map-keys($tier-colors)}";
  }
}

// Tier glow effect mixin
// Usage: @include tier-glow(gold, 0.5);
@mixin tier-glow($tier-name, $opacity: 0.3) {
  @if map-has-key($tier-colors, $tier-name) {
    $tier-color: map-get($tier-colors, $tier-name);
    box-shadow: 0 0 20px rgba($tier-color, $opacity),
      0 0 40px rgba($tier-color, $opacity * 0.5);
  } @else {
    @warn "Unknown tier: #{$tier-name}. Available tiers: #{map-keys($tier-colors)}";
  }
}

// Tier border mixin
// Usage: @include tier-border(platinum, 2px);
@mixin tier-border($tier-name, $width: 2px) {
  @if map-has-key($tier-colors, $tier-name) {
    $tier-color: map-get($tier-colors, $tier-name);
    border: $width solid $tier-color;
  } @else {
    @warn "Unknown tier: #{$tier-name}. Available tiers: #{map-keys($tier-colors)}";
  }
}

// Tier text gradient mixin
// Usage: @include tier-text-gradient(diamond);
@mixin tier-text-gradient($tier-name) {
  @if map-has-key($tier-colors, $tier-name) {
    $tier-color: map-get($tier-colors, $tier-name);
    background: linear-gradient(
      90deg,
      $tier-color 0%,
      color-mix(in srgb, $tier-color 120%, white) 50%,
      $tier-color 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  } @else {
    @warn "Unknown tier: #{$tier-name}. Available tiers: #{map-keys($tier-colors)}";
  }
}

// A11Y

/* Hiding class, making content visible only to screen readers but not visually */
/* "sr" meaning "screen-reader" */
/* https://css-tricks.com/inclusively-hidden/ */
@mixin sr-only {
  &:not(:focus):not(:active) {
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    height: 1px;
    overflow: hidden;
    position: absolute;
    white-space: nowrap;
    width: 1px;
  }
}
